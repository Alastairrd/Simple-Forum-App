<!DOCTYPE html>
<html>
	<head>
		<title><%=appName %> : <%=topicName %> : <%=postTitle%></title>
		<link rel="stylesheet" type="text/css" href="/main.css" />
	</head>
	<body>
		<header>
			<nav class="topnav">
				<a class="active" href="./">Home</a>
				<a href="list">Lists</a>
				<a href="search">Search</a>
				
				<!--if no user, show login-->
				<% if(user == null){ %>
					<div class="account" id="login">
						<a href="login">Log in</a>
					</div>
				<!--if user exists, show logout-->
				<% } else { %>
					<div class="account" id="logout">
						<a href="logout">Logout</a>
					</div>
				<% } %>
			</nav>
		</header>
		<main>
			<div class="main">
				<!--main post div-->
				<div class="selected-post">
					<!--todo style, add datetime-->
					<h1 class="post_title"><%=postTitle %></h1>
					<p class="author">
						Posted by:
						<a
							class="username"
							href="user?username=<%= encodeURIComponent(post[0].username) %>"
							><%= post[0].username%></a
						>
					</p>
					<p class="post-info">
						Date posted: <%=post[0].datetime%>
					  </p>
					<p class="content"><%=post[0].content%></p>
				</div>
				<!--comments section-->
				<% for(i=0; i < comments.length; i++) { %> 
				<% if(comments[i].previous_id == null) { %>
				<div class="base-comment">
					<!--todo style-->
					<p class="author">
						Posted by:
						<a
							class="username"
							href="user?username=<%= encodeURIComponent(comments[i].username) %>"
							><%= comments[i].username%></a
						>
					</p>
					<p class="post-info">
						Date posted: <%=comments[i].datetime%>
					  </p>
					<p class="content"><%=comments[i].content%></p>
				</div>
				<% }else{ %>
				<div class="reply">
					<p class="author">
						Posted by:
						<a
							class="username"
							href="user?username=<%= encodeURIComponent(comments[i].username) %>"
							><%= comments[i].username%></a
						>
					</p>
					<p class="post-info">
						Date posted: <%=comments[i].datetime%>
					  </p>
					</br>
					  <p class="quote">Replying to <%=comments[comments[i].previous_id].username%>: "<%=comments[comments[i].previous_id].content%>"</p>
					
					<p class="content"><%=comments[i].content%></p>
				</div>

				<% } } %>
			</div>
			
		</main>
	</body>
</html>
